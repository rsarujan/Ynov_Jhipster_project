{"file":"/Users/sarujanrajaratnam/Desktop/Ynov/Ynov_TEST_Projet/src/test/javascript/spec/app/shared/login/login.component.spec.ts","mappings":"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","names":[],"sources":["/Users/sarujanrajaratnam/Desktop/Ynov/Ynov_TEST_Projet/src/test/javascript/spec/app/shared/login/login.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed, async, inject, fakeAsync, tick } from '@angular/core/testing';\nimport { FormBuilder } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\nimport { LoginService } from 'app/core/login/login.service';\nimport { LoginModalComponent } from 'app/shared/login/login.component';\nimport { ProBiblioTestModule } from '../../../test.module';\nimport { MockLoginService } from '../../../helpers/mock-login.service';\nimport { MockRouter } from '../../../helpers/mock-route.service';\nimport { MockActiveModal } from '../../../helpers/mock-active-modal.service';\n\ndescribe('Component Tests', () => {\n  describe('LoginComponent', () => {\n    let comp: LoginModalComponent;\n    let fixture: ComponentFixture<LoginModalComponent>;\n    let mockLoginService: MockLoginService;\n    let mockRouter: MockRouter;\n    let mockActiveModal: MockActiveModal;\n\n    beforeEach(async(() => {\n      TestBed.configureTestingModule({\n        imports: [ProBiblioTestModule],\n        declarations: [LoginModalComponent],\n        providers: [\n          FormBuilder,\n          {\n            provide: LoginService,\n            useClass: MockLoginService,\n          },\n        ],\n      })\n        .overrideTemplate(LoginModalComponent, '')\n        .compileComponents();\n    }));\n\n    beforeEach(() => {\n      fixture = TestBed.createComponent(LoginModalComponent);\n      comp = fixture.componentInstance;\n      mockLoginService = TestBed.get(LoginService);\n      mockRouter = TestBed.get(Router);\n      mockActiveModal = TestBed.get(NgbActiveModal);\n    });\n\n    it('should authenticate the user', inject(\n      [],\n      fakeAsync(() => {\n        // GIVEN\n        const credentials = {\n          username: 'admin',\n          password: 'admin',\n          rememberMe: true,\n        };\n\n        comp.loginForm.patchValue({\n          username: 'admin',\n          password: 'admin',\n          rememberMe: true,\n        });\n        mockLoginService.setResponse({});\n        mockRouter.url = '/admin/metrics';\n\n        // WHEN/\n        comp.login();\n        tick(); // simulate async\n\n        // THEN\n        expect(comp.authenticationError).toEqual(false);\n        expect(mockActiveModal.closeSpy).toHaveBeenCalled();\n        expect(mockLoginService.loginSpy).toHaveBeenCalledWith(credentials);\n      })\n    ));\n\n    it('should empty the credentials upon cancel', () => {\n      // GIVEN\n      comp.loginForm.patchValue({\n        username: 'admin',\n        password: 'admin',\n      });\n\n      const expected = {\n        username: '',\n        password: '',\n        rememberMe: false,\n      };\n\n      // WHEN\n      comp.cancel();\n\n      // THEN\n      expect(comp.authenticationError).toEqual(false);\n      expect(comp.loginForm.get('username')!.value).toEqual(expected.username);\n      expect(comp.loginForm.get('password')!.value).toEqual(expected.password);\n      expect(comp.loginForm.get('rememberMe')!.value).toEqual(expected.rememberMe);\n      expect(mockActiveModal.dismissSpy).toHaveBeenCalledWith('cancel');\n    });\n\n    it('should redirect user when register', () => {\n      // WHEN\n      comp.register();\n\n      // THEN\n      expect(mockActiveModal.dismissSpy).toHaveBeenCalledWith('to state register');\n      expect(mockRouter.navigateSpy).toHaveBeenCalledWith(['/account/register']);\n    });\n\n    it('should redirect user when request password', () => {\n      // WHEN\n      comp.requestResetPassword();\n\n      // THEN\n      expect(mockActiveModal.dismissSpy).toHaveBeenCalledWith('to state requestReset');\n      expect(mockRouter.navigateSpy).toHaveBeenCalledWith(['/account/reset', 'request']);\n    });\n  });\n});\n"],"version":3}