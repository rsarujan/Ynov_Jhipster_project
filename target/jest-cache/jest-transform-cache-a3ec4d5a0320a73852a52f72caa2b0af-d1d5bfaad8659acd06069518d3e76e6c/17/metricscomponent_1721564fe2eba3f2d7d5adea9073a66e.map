{"version":3,"sources":["/Users/sarujanrajaratnam/Desktop/Ynov/Ynov_TEST_Projet/src/main/webapp/app/admin/metrics/metrics.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { flatMap } from 'rxjs/operators';\n\nimport { MetricsService, Metrics, MetricsKey, ThreadDump, Thread } from './metrics.service';\n\n@Component({\n  selector: 'jhi-metrics',\n  templateUrl: './metrics.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MetricsComponent implements OnInit {\n  metrics?: Metrics;\n  threads?: Thread[];\n  updatingMetrics = true;\n\n  constructor(private metricsService: MetricsService, private changeDetector: ChangeDetectorRef) {}\n\n  ngOnInit(): void {\n    this.refresh();\n  }\n\n  refresh(): void {\n    this.updatingMetrics = true;\n    this.metricsService\n      .getMetrics()\n      .pipe(\n        flatMap(\n          () => this.metricsService.threadDump(),\n          (metrics: Metrics, threadDump: ThreadDump) => {\n            this.metrics = metrics;\n            this.threads = threadDump.threads;\n            this.updatingMetrics = false;\n            this.changeDetector.detectChanges();\n          }\n        )\n      )\n      .subscribe();\n  }\n\n  metricsKeyExists(key: MetricsKey): boolean {\n    return this.metrics && this.metrics[key];\n  }\n\n  metricsKeyExistsAndObjectNotEmpty(key: MetricsKey): boolean {\n    return this.metrics && this.metrics[key] && JSON.stringify(this.metrics[key]) !== '{}';\n  }\n}\n"]}