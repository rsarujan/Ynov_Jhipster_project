{"version":3,"sources":["/Users/sarujanrajaratnam/Desktop/Ynov/Ynov_TEST_Projet/src/main/webapp/app/core/auth/auth-jwt.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\n\nimport { SERVER_API_URL } from 'app/app.constants';\nimport { Login } from 'app/core/login/login.model';\n\ntype JwtToken = {\n  id_token: string;\n};\n\n@Injectable({ providedIn: 'root' })\nexport class AuthServerProvider {\n  constructor(private http: HttpClient, private $localStorage: LocalStorageService, private $sessionStorage: SessionStorageService) {}\n\n  getToken(): string {\n    return this.$localStorage.retrieve('authenticationToken') || this.$sessionStorage.retrieve('authenticationToken') || '';\n  }\n\n  login(credentials: Login): Observable<void> {\n    return this.http\n      .post<JwtToken>(SERVER_API_URL + 'api/authenticate', credentials)\n      .pipe(map(response => this.authenticateSuccess(response, credentials.rememberMe)));\n  }\n\n  logout(): Observable<void> {\n    return new Observable(observer => {\n      this.$localStorage.clear('authenticationToken');\n      this.$sessionStorage.clear('authenticationToken');\n      observer.complete();\n    });\n  }\n\n  private authenticateSuccess(response: JwtToken, rememberMe: boolean): void {\n    const jwt = response.id_token;\n    if (rememberMe) {\n      this.$localStorage.store('authenticationToken', jwt);\n    } else {\n      this.$sessionStorage.store('authenticationToken', jwt);\n    }\n  }\n}\n"]}