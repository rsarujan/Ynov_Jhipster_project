{"version":3,"sources":["/Users/sarujanrajaratnam/Desktop/Ynov/YNOV_PROJET_BIBLIOTHEQUE_CLEMENCE_SARUJAN/Ynov_TEST_Projet/src/main/webapp/app/admin/configuration/configuration.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAA,MAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,eAAA,CAAA,CAAA;AACA,MAAA,MAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,sBAAA,CAAA,CAAA;AAEA,MAAA,WAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;AAEA,MAAA,eAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,mBAAA,CAAA,CAAA;;;;AA4CA,IAAa,oBAAoB,GAAjC,MAAa,oBAAb,CAAiC;AAC/B,EAAA,WAAA,CAAoB,IAApB,EAAoC;AAAA;AAAA;AAAA;AAAhB,SAAA,IAAA,GAAA,IAAA;AAAoB;;AAExC,EAAA,QAAQ,GAAA;AAAA;AAAA;AAAA;AACN,WAAO,KAAK,IAAL,CAAU,GAAV,CAA2B,eAAA,CAAA,cAAA,GAAiB,wBAA5C,EAAsE,IAAtE,CACL,WAAA,CAAA,GAAA,CAAI,WAAW,IACb;AAAA;AAAA;AAAA;AAAA,aAAA,MAAM,CAAC,MAAP,CACE,MAAM,CAAC,MAAP,CAAc,WAAW,CAAC,QAA1B,EACG,GADH,CACO,OAAO,IAAI;AAAA;AAAA;AAAA;AAAA,eAAA,OAAO,CAAC,KAAR;AAAa,OAD/B,EAEG,MAFH,CAEU,CAAC,QAAD,EAAkB,YAAlB,KAA0C;AAAA;AAAA;AAAA;AAAA,eAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAM,QAAN,CAAA,EAAmB,YAAnB;AAA+B,OAFnF,CADF;AAIC,KALH,CADK,CAAP;AASD;;AAED,EAAA,kBAAkB,GAAA;AAAA;AAAA;AAAA;AAChB,WAAO,KAAK,IAAL,CAAU,GAAV,CAAmB,eAAA,CAAA,cAAA,GAAiB,gBAApC,EAAsD,IAAtD,CAA2D,WAAA,CAAA,GAAA,CAAI,GAAG,IAAI;AAAA;AAAA;AAAA;AAAA,aAAA,GAAG,CAAC,eAAJ;AAAmB,KAA9B,CAA3D,CAAP;AACD;;AAjB8B,CAAjC;;;;AAAa,oBAAoB,GAAA,OAAA,CAAA,UAAA,CAAA,CADhC,MAAA,CAAA,UAAA,CAAW;AAAE,EAAA,UAAU,EAAE;AAAd,CAAX,CACgC,E,yCACL,MAAA,CAAA,U,EADK,CAAA,EAApB,oBAAoB,CAApB;;;;AAAA,OAAA,CAAA,oBAAA,GAAA,oBAAA","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { SERVER_API_URL } from 'app/app.constants';\n\nexport interface ConfigProps {\n  contexts: Contexts;\n}\n\nexport interface Contexts {\n  [key: string]: Context;\n}\n\nexport interface Context {\n  beans: Beans;\n  parentId?: any;\n}\n\nexport interface Beans {\n  [key: string]: Bean;\n}\n\nexport interface Bean {\n  prefix: string;\n  properties: any;\n}\n\nexport interface Env {\n  activeProfiles?: string[];\n  propertySources: PropertySource[];\n}\n\nexport interface PropertySource {\n  name: string;\n  properties: Properties;\n}\n\nexport interface Properties {\n  [key: string]: Property;\n}\n\nexport interface Property {\n  value: string;\n  origin?: string;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class ConfigurationService {\n  constructor(private http: HttpClient) {}\n\n  getBeans(): Observable<Bean[]> {\n    return this.http.get<ConfigProps>(SERVER_API_URL + 'management/configprops').pipe(\n      map(configProps =>\n        Object.values(\n          Object.values(configProps.contexts)\n            .map(context => context.beans)\n            .reduce((allBeans: Beans, contextBeans: Beans) => ({ ...allBeans, ...contextBeans }))\n        )\n      )\n    );\n  }\n\n  getPropertySources(): Observable<PropertySource[]> {\n    return this.http.get<Env>(SERVER_API_URL + 'management/env').pipe(map(env => env.propertySources));\n  }\n}\n"]}